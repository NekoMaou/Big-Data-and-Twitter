<!DOCTYPE html>
<html>
  <head>
    <title>Map Test</title>
    <!--<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    (todo: get an icon)-->
    <style type="text/css">
      html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZ1QG7SEdSi66Tr0IE5ehHUpnoAbEQcnE">
    </script>
  </head>
  <body>
<div id="map-canvas"></div>
  </body>
    <script type="text/javascript">
var mapOptions = {center: { lat: 51.48, lng: 0},zoom: 2};
map = new google.maps.Map(document.getElementById('map-canvas'),
mapOptions);

//This data should be loaded from somewhere
lang={"type": "FeatureCollection","features":[
	{"type": "Feature",
		"properties":{"language":"en"},
		"geometry": {"type": "Point","coordinates": [0, 0]}
	},
	{"type": "Feature",
		"properties":{"language":"fr"},
		"geometry": {"type": "Point","coordinates": [10, 10]}
	}
]}


map.data.addGeoJson(lang)
//map.data.loadGeoJson(url)


flags={
	'en':'http://upload.wikimedia.org/wikipedia/en/thumb/a/ae/Flag_of_the_United_Kingdom.svg/30px-Flag_of_the_United_Kingdom.svg.png',
	'fr':'http://upload.wikimedia.org/wikipedia/en/thumb/c/c3/Flag_of_France.svg/30px-Flag_of_France.svg.png'
}
map.data.setStyle(function(feature) {
    var lang = feature.getProperty('language');
    return {
      'icon':flags[lang]
    };
});
    </script>
</html>
